import{$ as v,A as D,B as b,C as Q,D as O,E as X,F as Z,G as tt,H as et,M as V,N as E,O as I,P as it,Q as j,R as z,U as L,V as rt,W as M,X as nt,Y as ot,Z as B,a as q,b as A,ba as lt,c as N,ca as at,d as H,da as st,ea as mt,f as Y,fa as ct,g as W,ga as dt,h as J,i as u,j as $,k as x,ka as pt,l as F,la as ht,m as K,n as a,o as d,p as y,q as c,r as o,s as n,t as p,u as w,v as g,w as h,y as l,z as f}from"./chunk-Q3F7V2Z4.js";var S=(()=>{let t=class t{constructor(e){this.http=e,this.url="flight",this.notify=new q(""),this.notifyObservable$=this.notify.asObservable()}getFlights(){return this.http.get(`${E.apiUrl}/${this.url}`)}getFlightById(e){return this.http.get(`${E.apiUrl}/${this.url}/${e}`)}updateFlight(e){return this.http.post(`${E.apiUrl}/${this.url}/${e.id}`,e)}updateFlightWithId(e,r){return this.http.post(`${E.apiUrl}/${this.url}/${e}`,r).pipe(N(this.handleError))}createFlight(e){return this.http.post(`${E.apiUrl}/${this.url}`,e,{observe:"response"}).pipe(N(this.handleError))}deleteFlight(e){return this.http.delete(`${E.apiUrl}/${this.url}/${e.id}`).pipe(N(this.handleError))}notifyOther(e){e&&this.notify.next(e)}handleError(e){let r="An unknown error occurred!";if(!e.status)return A(()=>new Error(r));switch(e.status){case 401:r="You must be logged in to do it."}return A(()=>new Error(r))}};t.\u0275fac=function(r){return new(r||t)(J(et))},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function bt(i,t){if(i&1&&(o(0,"div",12)(1,"p"),l(2),n()()),i&2){let m=h(2);a(2),f(m.error)}}function _t(i,t){i&1&&(o(0,"p"),l(1,"typSamolotu: Embraer"),n())}function Ct(i,t){i&1&&(o(0,"p"),l(1,"typSamolotu: Boeing"),n())}function Et(i,t){i&1&&(o(0,"p"),l(1,"typSamolotu: Airbus"),n())}function wt(i,t){if(i&1){let m=w();o(0,"div"),p(1,"br"),o(2,"div",1)(3,"div",2),y(4,bt,3,1,"div",3),o(5,"div",4)(6,"button",5),l(7," Manage Flight "),p(8,"span",6),n(),o(9,"ul",7)(10,"li",8)(11,"a",9),g("click",function(){x(m);let r=h();return F(r.onEditFlight())}),l(12,"Edit Flight"),n()(),o(13,"li",8)(14,"a",9),g("click",function(){x(m);let r=h();return F(r.onDeleteFlight())}),l(15,"Delete Flight"),n()()()()()(),p(16,"hr"),o(17,"div",1)(18,"div",2)(19,"h1"),l(20),n()()(),o(21,"div",1)(22,"div",2),l(23),n()(),o(24,"div",1)(25,"div",2),l(26),n()(),o(27,"div",1)(28,"div",2),l(29),n()(),o(30,"div",1)(31,"div",2),l(32),n()(),o(33,"div",1)(34,"div",10),y(35,_t,2,0,"p",11)(36,Ct,2,0,"p",11)(37,Et,2,0,"p",11),n()()()}if(i&2){let m=h();a(4),c("ngIf",m.error),a(16),f(m.flight.id),a(3),D("numerLotu: ",m.flight.numerLotu,""),a(3),D("dataWylotu: ",m.flight.dataWylotu,""),a(3),D("miejsceWylotu: ",m.flight.miejsceWylotu,""),a(3),D("miejscePrzylotu: ",m.flight.miejscePrzylotu,""),a(2),c("ngSwitch",m.flight.typSamolotu),a(),c("ngSwitchCase",0),a(),c("ngSwitchCase",1),a(),c("ngSwitchCase",2)}}var ft=(()=>{let t=class t{constructor(e,r,s,C){this.flightService=e,this.route=r,this.router=s,this.titleService=C,this.flight=null,this.error=null}ngOnInit(){this.route.paramMap.pipe(H(e=>(this.id=Number(e.get("id")),this.flightService.getFlightById(this.id)))).subscribe(e=>{this.flight=e,this.titleService.setTitle(`${this.flight.numerLotu}: ${this.flight.miejsceWylotu} -> ${this.flight.miejscePrzylotu}`)})}fetchFlight(){this.flightService.getFlightById(this.id).subscribe(e=>this.flight=e)}onEditFlight(){this.router.navigate(["edit"],{relativeTo:this.route})}onDeleteFlight(){this.flightService.deleteFlight(this.flight).subscribe(()=>{this.flightService.notifyOther({refresh:!0}),this.router.navigate(["/flight"])},e=>{this.error=e.message})}};t.\u0275fac=function(r){return new(r||t)(d(S),d(I),d(j),d(V))},t.\u0275cmp=u({type:t,selectors:[["app-flight-detail"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row"],[1,"col-xs-12"],["class","alert alert-danger",4,"ngIf"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],[1,"dropdown-menu"],[1,"dropdown-item"],[2,"cursor","pointer",3,"click"],[1,"col-xs-12",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"alert","alert-danger"]],template:function(r,s){r&1&&y(0,wt,38,10,"div",0),r&2&&c("ngIf",s.flight)},dependencies:[O,X,Z]});let i=t;return i})();var R=function(i){return i[i.Embraer=0]="Embraer",i[i.Boeing=1]="Boeing",i[i.Airbus=2]="Airbus",i}(R||{});function It(i,t){if(i&1&&(o(0,"div",22)(1,"p"),l(2),n()()),i&2){let m=h(2);a(2),f(m.error)}}function jt(i,t){i&1&&(o(0,"span"),l(1,"Save"),n())}function Mt(i,t){i&1&&(o(0,"span"),l(1,"Create"),n())}function Tt(i,t){if(i&1){let m=w();o(0,"div")(1,"div",1)(2,"div",2),y(3,It,3,1,"div",3),o(4,"form",4),g("ngSubmit",function(){x(m);let r=h();return F(r.onSubmit())}),o(5,"div",1)(6,"div",2)(7,"button",5),y(8,jt,2,0,"span",0)(9,Mt,2,0,"span",0),n(),l(10," | "),o(11,"button",6),g("click",function(){x(m);let r=h();return F(r.onCancel())}),l(12," Cancel "),n(),l(13," | "),o(14,"button",7),g("click",function(){x(m);let r=h();return F(r.onFeedTestData())}),l(15," Feed Test Data "),n()()(),o(16,"div",1)(17,"div",2)(18,"div",8)(19,"label",9),l(20,"numer lotu"),n(),p(21,"input",10),n()()(),o(22,"div",1)(23,"div",2)(24,"div",8)(25,"label",11),l(26,"data wylotu"),n(),p(27,"input",12),n()()(),o(28,"div",1)(29,"div",2)(30,"div",8)(31,"label",13),l(32,"miejsce wylotu"),n(),p(33,"input",14),n()()(),o(34,"div",1)(35,"div",2)(36,"div",8)(37,"label",15),l(38,"miejsce przylotu"),n(),p(39,"input",16),n()()(),o(40,"div",1)(41,"div",2)(42,"div",8)(43,"label",17),l(44,"typ samolotu"),n(),o(45,"select",18)(46,"option",19),l(47,"Embraer"),n(),o(48,"option",20),l(49,"Boeing"),n(),o(50,"option",21),l(51,"Airbus"),n()()()()()()()()()}if(i&2){let m=h();a(3),c("ngIf",m.error),a(),c("formGroup",m.flightForm),a(3),c("disabled",!m.flightForm.valid),a(),c("ngIf",m.editMode),a(),c("ngIf",!m.editMode)}}var P=(()=>{let t=class t{constructor(e,r,s,C){this.route=e,this.flightService=r,this.router=s,this.titleService=C,this.flight=null,this.editMode=!1,this.error=null}ngOnInit(){this.route.params.subscribe(e=>{this.id=+e.id,this.editMode=e.id!=null,this.initForm(),this.editMode?this.flightService.getFlightById(this.id).subscribe(r=>{this.flight=r,this.titleService.setTitle(`${this.flight.numerLotu}: ${this.flight.miejsceWylotu} -> ${this.flight.miejscePrzylotu}`),this.initForm()}):this.titleService.setTitle("New Flight")})}onSubmit(){this.editMode?this.flightService.updateFlightWithId(this.id,this.flightForm.value).subscribe(()=>{this.flightService.notifyOther({refresh:!0}),this.onCancel()},e=>{this.error=e.message}):this.flightService.createFlight(this.flightForm.value).subscribe(e=>{let r=e.headers.get("location");this.router.navigate([r]),this.flightService.notifyOther({refresh:!0})},e=>{this.error=e.message})}refreshGridInAnotherComponent(){this.flightService.notifyOther({refresh:!0})}onCancel(){this.router.navigate(["../"],{relativeTo:this.route})}initForm(){let e=null,r="",s="",C="",G=null;this.editMode&&(this.fetchFlight(),this.flight&&(e=this.flight.numerLotu,r=this.flight.dataWylotu,s=this.flight.miejsceWylotu,C=this.flight.miejscePrzylotu,G=this.flight.typSamolotu)),this.flightForm=new B({numerLotu:new v(e,M.required),dataWylotu:new v(r,M.required),miejsceWylotu:new v(s,M.required),miejscePrzylotu:new v(C,M.required),typSamolotu:new v(G,M.required)})}fetchFlight(){this.flightService.getFlightById(this.id).subscribe(e=>this.flight=e)}onFeedTestData(){this.flightForm=new B({numerLotu:new v(Math.floor(Math.random()*100)),dataWylotu:new v(new Date(2024,Math.floor(Math.random()*12),Math.floor(Math.random()*30),Math.floor(Math.random()*24),Math.floor(Math.random()*60),Math.floor(Math.random()*60)).toISOString()),miejsceWylotu:new v("Miejsce wylotu "+Math.floor(Math.random()*100)),miejscePrzylotu:new v("Miejsce przylotu "+Math.floor(Math.random()*100)),typSamolotu:new v(R[Math.floor(Math.random()*3)])})}};t.\u0275fac=function(r){return new(r||t)(d(I),d(S),d(j),d(V))},t.\u0275cmp=u({type:t,selectors:[["app-flight-edit"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row"],[1,"col-xs-12"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit","formGroup"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"form-group"],["for","numerLotu"],["type","text","id","numerLotu","formControlName","numerLotu",1,"form-control"],["for","dataWylotu"],["type","text","id","dataWylotu","formControlName","dataWylotu",1,"form-control"],["for","miejsceWylotu"],["type","text","id","miejsceWylotu","formControlName","miejsceWylotu",1,"form-control"],["for","miejscePrzylotu"],["type","text","id","miejscePrzylotu","formControlName","miejscePrzylotu",1,"form-control"],["for","typSamolotu"],["id","typSamolotu","formControlName","typSamolotu",1,"form-select"],["selected","","value","Embraer"],["value","Boeing"],["value","Airbus"],[1,"alert","alert-danger"]],template:function(r,s){r&1&&y(0,Tt,52,5,"div",0),r&2&&c("ngIf",s.flightForm)},dependencies:[lt,ct,dt,rt,mt,nt,ot,at,st,O]});let i=t;return i})();var gt=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=u({type:t,selectors:[["app-flight-start"]],decls:0,vars:0,template:function(r,s){}});let i=t;return i})();var Dt=["app-flight-item",""],T=i=>[i],vt=(()=>{let t=class t{constructor(e){this.flightService=e,this.flightToUpdate=new K}editFlight(e){this.flightService.getFlightById(this.index).subscribe(r=>this.flightToUpdate.emit(r))}};t.\u0275fac=function(r){return new(r||t)(d(S))},t.\u0275cmp=u({type:t,selectors:[["","app-flight-item",""]],inputs:{flight:"flight",index:"index"},outputs:{flightToUpdate:"flightToUpdate"},attrs:Dt,decls:12,vars:24,consts:[[3,"routerLink"]],template:function(r,s){r&1&&(o(0,"td",0),l(1),n(),o(2,"td",0),l(3),n(),o(4,"td",0),l(5),n(),o(6,"td",0),l(7),n(),o(8,"td",0),l(9),n(),o(10,"td",0),l(11),n()),r&2&&(c("routerLink",b(12,T,s.flight.id)),a(),f(s.flight.id),a(),c("routerLink",b(14,T,s.flight.id)),a(),f(s.flight.numerLotu),a(),c("routerLink",b(16,T,s.flight.id)),a(),f(s.flight.dataWylotu),a(),c("routerLink",b(18,T,s.flight.id)),a(),f(s.flight.miejsceWylotu),a(),c("routerLink",b(20,T,s.flight.id)),a(),f(s.flight.miejscePrzylotu),a(),c("routerLink",b(22,T,s.flight.id)),a(),f(s.flight.typSamolotu))},dependencies:[z]});let i=t;return i})();var kt=i=>[i];function Nt(i,t){if(i&1){let m=w();o(0,"tr",3),g("flightToUpdate",function(r){x(m);let s=h();return F(s.editFlight(r))}),n()}if(i&2){let m=t.$implicit;c("flight",m)("index",m.id)("routerLink",b(3,kt,m.id))}}var yt=(()=>{let t=class t{constructor(e){this.flightService=e,this.flights=[]}ngOnInit(){this.fetchData(),this.flightService.notifyObservable$.subscribe(e=>{e.refresh&&this.fetchData()})}fetchData(){this.flightService.getFlights().subscribe(e=>this.flights=e)}};t.\u0275fac=function(r){return new(r||t)(d(S))},t.\u0275cmp=u({type:t,selectors:[["app-flight-list"]],inputs:{flights:"flights"},decls:19,vars:1,consts:[[1,"table"],[1,"table","table-striped","table-sm"],["app-flight-item","",3,"flight","index","routerLink","flightToUpdate",4,"ngFor","ngForOf"],["app-flight-item","",3,"flightToUpdate","flight","index","routerLink"]],template:function(r,s){r&1&&(p(0,"hr"),o(1,"div",0)(2,"table",1)(3,"thead")(4,"tr")(5,"th"),l(6,"Id"),n(),o(7,"th"),l(8,"numerLotu"),n(),o(9,"th"),l(10,"dataWylotu"),n(),o(11,"th"),l(12,"miejsceWylotu"),n(),o(13,"th"),l(14,"miejscePrzylotu"),n(),o(15,"th"),l(16,"typSamolotu"),n()()(),o(17,"tbody"),y(18,Nt,1,5,"tr",2),n()()()),r&2&&(a(18),c("ngForOf",s.flights))},dependencies:[z,Q,vt]});let i=t;return i})();var St=(()=>{let t=class t{constructor(e,r,s){this.flightService=e,this.router=r,this.route=s}initNewFlight(){this.router.navigate(["new"],{relativeTo:this.route})}};t.\u0275fac=function(r){return new(r||t)(d(S),d(j),d(I))},t.\u0275cmp=u({type:t,selectors:[["app-flight"]],decls:7,vars:0,consts:[[1,"row"],[1,"col-lg-8"],[1,"btn","btn-success",3,"click"],[1,"col-lg-4"]],template:function(r,s){r&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),g("click",function(){return s.initNewFlight()}),l(3,"Create New Flight"),n(),p(4,"app-flight-list"),n(),o(5,"div",3),p(6,"router-outlet"),n()())},dependencies:[it,yt]});let i=t;return i})();var $t=[{path:"",title:"flight",component:St,children:[{path:"",component:gt},{path:"new",component:P},{path:":id",component:ft},{path:":id/edit",component:P}]}],xt=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=W({imports:[L.forChild($t),L]});let i=t;return i})();var Fe=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=W({imports:[L,ht,pt,xt,tt]});let i=t;return i})();export{Fe as a};
