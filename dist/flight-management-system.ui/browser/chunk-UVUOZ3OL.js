import{$ as at,A as j,B as w,C as tt,D as O,E as et,F as it,K as V,L as E,M,N as rt,O as D,P as U,S as W,T as ot,U as _,V as nt,W as lt,X as G,Z as f,a as Y,aa as st,b as R,ba as mt,c as L,ca as ct,d as J,da as dt,ea as ht,f as Q,g as N,h as X,i as g,ia as pt,j as $,ja as ut,k as S,l as x,m as Z,n as m,o as d,p as b,q as c,r as n,s as o,t as h,u as I,v as y,w as u,y as l,z as v}from"./chunk-EDXPGZTQ.js";var F=(()=>{let e=class e{constructor(t){this.http=t,this.url="flight",this.notify=new Y(""),this.notifyObservable$=this.notify.asObservable()}getFlights(){return this.http.get(`${E.apiUrl}/${this.url}`)}getFlightById(t){return this.http.get(`${E.apiUrl}/${this.url}/${t}`)}updateFlight(t){return this.http.post(`${E.apiUrl}/${this.url}/${t.id}`,t)}updateFlightWithId(t,r){return this.http.post(`${E.apiUrl}/${this.url}/${t}`,r).pipe(L(this.handleError))}createFlight(t){return this.http.post(`${E.apiUrl}/${this.url}`,t,{observe:"response"}).pipe(L(this.handleError))}deleteFlight(t){return this.http.delete(`${E.apiUrl}/${this.url}/${t.id}`).pipe(L(this.handleError))}notifyOther(t){t&&this.notify.next(t)}handleError(t){let r="An unknown error occurred!";if(!t.status)return R(()=>new Error(r));switch(t.status){case 401:r="You must be logged in to do it."}return R(()=>new Error(r))}};e.\u0275fac=function(r){return new(r||e)(X(it))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function wt(i,e){if(i&1&&(n(0,"div",10)(1,"p"),l(2),o()()),i&2){let s=u(2);m(2),v(s.error)}}function Ct(i,e){if(i&1){let s=I();n(0,"div"),h(1,"br"),n(2,"div",1)(3,"div",2),b(4,wt,3,1,"div",3),n(5,"div",4)(6,"button",5),l(7," Manage Flight "),h(8,"span",6),o(),n(9,"ul",7)(10,"li",8)(11,"a",9),y("click",function(){S(s);let r=u();return x(r.onEditFlight())}),l(12,"Edit Flight"),o()(),n(13,"li",8)(14,"a",9),y("click",function(){S(s);let r=u();return x(r.onDeleteFlight())}),l(15,"Delete Flight"),o()()()()()(),h(16,"hr"),n(17,"div",1)(18,"div",2)(19,"h1"),l(20),o()()(),n(21,"div",1)(22,"div",2),l(23),o()(),n(24,"div",1)(25,"div",2),l(26),o()(),n(27,"div",1)(28,"div",2),l(29),o()(),n(30,"div",1)(31,"div",2),l(32),o()(),n(33,"div",1)(34,"div",2),l(35),o()()()}if(i&2){let s=u();m(4),c("ngIf",s.error),m(16),v(s.flight.id),m(3),j("Numer lotu: ",s.flight.numerLotu,""),m(3),j("Data wylotu: ",s.flight.dataWylotu,""),m(3),j("Miejsce wylotu: ",s.flight.miejsceWylotu,""),m(3),j("Miejsce przylotu: ",s.flight.miejscePrzylotu,""),m(3),j("Typ samolotu: ",s.flight.typSamolotu,"")}}var gt=(()=>{let e=class e{constructor(t,r,a,p){this.flightService=t,this.route=r,this.router=a,this.titleService=p,this.flight=null,this.error=null}ngOnInit(){this.route.paramMap.pipe(J(t=>(this.id=Number(t.get("id")),this.flightService.getFlightById(this.id)))).subscribe(t=>{this.flight=t,this.titleService.setTitle(`${this.flight.numerLotu}: ${this.flight.miejsceWylotu} -> ${this.flight.miejscePrzylotu}`)})}fetchFlight(){this.flightService.getFlightById(this.id).subscribe(t=>this.flight=t)}onEditFlight(){this.router.navigate(["edit"],{relativeTo:this.route})}onDeleteFlight(){this.flightService.deleteFlight(this.flight).subscribe(()=>{this.flightService.notifyOther({refresh:!0}),this.router.navigate(["/flight"])},t=>{this.error=t.message})}};e.\u0275fac=function(r){return new(r||e)(d(F),d(M),d(D),d(V))},e.\u0275cmp=g({type:e,selectors:[["app-flight-detail"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row"],[1,"col-xs-12"],["class","alert alert-danger",4,"ngIf"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],[1,"dropdown-menu"],[1,"dropdown-item"],[2,"cursor","pointer",3,"click"],[1,"alert","alert-danger"]],template:function(r,a){r&1&&b(0,Ct,36,7,"div",0),r&2&&c("ngIf",a.flight)},dependencies:[O]});let i=e;return i})();var q=function(i){return i[i.Embraer=0]="Embraer",i[i.Boeing=1]="Boeing",i[i.Airbus=2]="Airbus",i}(q||{}),B=class{constructor(e,s,t,r,a){this.numerLotu=e,this.dataWylotu=s,this.miejsceWylotu=t,this.miejscePrzylotu=r,this.typSamolotu=a}};function Et(i,e){if(i&1&&(n(0,"div",24)(1,"p"),l(2),o()()),i&2){let s=u(2);m(2),v(s.error)}}function _t(i,e){i&1&&(n(0,"span"),l(1,"Save"),o())}function It(i,e){i&1&&(n(0,"span"),l(1,"Create"),o())}function jt(i,e){if(i&1){let s=I();n(0,"div")(1,"div",1)(2,"div",2),b(3,Et,3,1,"div",3),n(4,"form",4),y("ngSubmit",function(){S(s);let r=u();return x(r.onSubmit())}),n(5,"div",1)(6,"div",2)(7,"button",5),b(8,_t,2,0,"span",0)(9,It,2,0,"span",0),o(),l(10," | "),n(11,"button",6),y("click",function(){S(s);let r=u();return x(r.onCancel())}),l(12," Cancel "),o(),l(13," | "),n(14,"button",7),y("click",function(){S(s);let r=u();return x(r.onFeedTestData())}),l(15," Feed Test Data "),o()()(),n(16,"div",1)(17,"div",2)(18,"div",8)(19,"label",9),l(20,"Numer lotu:"),o(),h(21,"input",10),o()()(),n(22,"div",1)(23,"div",2)(24,"div",8)(25,"label",11),l(26,"Data wylotu:"),o(),h(27,"input",12),o(),n(28,"div",8)(29,"label",13),l(30,"Godzina wylotu:"),o(),h(31,"input",14),o()()(),n(32,"div",1)(33,"div",2)(34,"div",8)(35,"label",15),l(36,"Miejsce wylotu:"),o(),h(37,"input",16),o()()(),n(38,"div",1)(39,"div",2)(40,"div",8)(41,"label",17),l(42,"Miejsce przylotu:"),o(),h(43,"input",18),o()()(),n(44,"div",1)(45,"div",2)(46,"div",8)(47,"label",19),l(48,"Typ samolotu:"),o(),n(49,"select",20)(50,"option",21),l(51,"Embraer"),o(),n(52,"option",22),l(53,"Boeing"),o(),n(54,"option",23),l(55,"Airbus"),o()()()()()()()()()}if(i&2){let s=u();m(3),c("ngIf",s.error),m(),c("formGroup",s.flightForm),m(3),c("disabled",!s.flightForm.valid),m(),c("ngIf",s.editMode),m(),c("ngIf",!s.editMode)}}var K=(()=>{let e=class e{constructor(t,r,a,p){this.route=t,this.flightService=r,this.router=a,this.titleService=p,this.flight=null,this.editMode=!1,this.error=null}ngOnInit(){this.route.params.subscribe(t=>{this.id=+t.id,this.editMode=t.id!=null,this.initForm(),this.editMode?this.flightService.getFlightById(this.id).subscribe(r=>{this.flight=r,this.titleService.setTitle(`${this.flight.numerLotu}: ${this.flight.miejsceWylotu} -> ${this.flight.miejscePrzylotu}`),this.initForm()}):this.titleService.setTitle("New Flight")})}onSubmit(){let t=this.flightForm.value.dataWylotu,r=this.flightForm.value.czasWylotu,a=new B(this.flightForm.value.numerLotu,new Date(`${t}T${r}`),this.flightForm.value.miejsceWylotu,this.flightForm.value.miejscePrzylotu,this.flightForm.value.typSamolotu);this.editMode?this.flightService.updateFlightWithId(this.id,a).subscribe(()=>{this.flightService.notifyOther({refresh:!0}),this.onCancel()},p=>{this.error=p.message}):this.flightService.createFlight(a).subscribe(p=>{let z=p.headers.get("location");this.router.navigate([z]),this.flightService.notifyOther({refresh:!0})},p=>{this.error=p.message})}refreshGridInAnotherComponent(){this.flightService.notifyOther({refresh:!0})}onCancel(){this.router.navigate(["../"],{relativeTo:this.route})}getDateFromDate(t){return t.toISOString().slice(0,10)}getTimeFromDate(t){return t.toTimeString().slice(0,5)}initForm(){let t=null,r=this.getDateFromDate(new Date),a=this.getTimeFromDate(new Date),p="",z="",H=null;this.editMode&&(this.fetchFlight(),this.flight&&(t=this.flight.numerLotu,r=this.getDateFromDate(new Date(this.flight.dataWylotu)),a=this.getTimeFromDate(new Date(this.flight.dataWylotu)),p=this.flight.miejsceWylotu,z=this.flight.miejscePrzylotu,H=this.flight.typSamolotu)),this.flightForm=new G({numerLotu:new f(t,_.required),dataWylotu:new f(r,_.required),czasWylotu:new f(a,_.required),miejsceWylotu:new f(p,_.required),miejscePrzylotu:new f(z,_.required),typSamolotu:new f(H,_.required)})}fetchFlight(){this.flightService.getFlightById(this.id).subscribe(t=>this.flight=t)}onFeedTestData(){this.flightForm=new G({numerLotu:new f(Math.floor(Math.random()*100)),dataWylotu:new f(this.getDateFromDate(new Date(2010+Math.floor(Math.random()*14),Math.floor(Math.random()*12),Math.floor(Math.random()*30)))),czasWylotu:new f(this.getTimeFromDate(new Date(2024,1,1,Math.floor(Math.random()*24),Math.floor(Math.random()*60)))),miejsceWylotu:new f(P[Math.floor(Math.random()*P.length)]),miejscePrzylotu:new f(P[Math.floor(Math.random()*P.length)]),typSamolotu:new f(q[Math.floor(Math.random()*3)])})}};e.\u0275fac=function(r){return new(r||e)(d(M),d(F),d(D),d(V))},e.\u0275cmp=g({type:e,selectors:[["app-flight-edit"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row"],[1,"col-xs-12"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit","formGroup"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"form-group"],["for","numerLotu"],["type","text","id","numerLotu","formControlName","numerLotu",1,"form-control"],["for","dataWylotu"],["type","date","id","dataWylotu","formControlName","dataWylotu",1,"form-control"],["for","czasWylotu"],["type","time","id","czasWylotu","formControlName","czasWylotu",1,"form-control"],["for","miejsceWylotu"],["type","text","id","miejsceWylotu","formControlName","miejsceWylotu",1,"form-control"],["for","miejscePrzylotu"],["type","text","id","miejscePrzylotu","formControlName","miejscePrzylotu",1,"form-control"],["for","typSamolotu"],["id","typSamolotu","formControlName","typSamolotu",1,"form-select"],["selected","","value","Embraer"],["value","Boeing"],["value","Airbus"],[1,"alert","alert-danger"]],template:function(r,a){r&1&&b(0,jt,56,5,"div",0),r&2&&c("ngIf",a.flightForm)},dependencies:[at,dt,ht,ot,ct,nt,lt,st,mt,O]});let i=e;return i})(),P=["Warszawa","Krak\xF3w","Gda\u0144sk","Wroc\u0142aw","Pozna\u0144","Szczecin","\u0141\xF3d\u017A","Katowice","Gdynia","Cz\u0119stochowa"];var vt=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=g({type:e,selectors:[["app-flight-start"]],decls:0,vars:0,template:function(r,a){}});let i=e;return i})();var Mt=["app-flight-item",""],T=i=>[i],yt=(()=>{let e=class e{constructor(t){this.flightService=t,this.flightToUpdate=new Z}editFlight(t){this.flightService.getFlightById(this.index).subscribe(r=>this.flightToUpdate.emit(r))}};e.\u0275fac=function(r){return new(r||e)(d(F))},e.\u0275cmp=g({type:e,selectors:[["","app-flight-item",""]],inputs:{flight:"flight",index:"index"},outputs:{flightToUpdate:"flightToUpdate"},attrs:Mt,decls:12,vars:24,consts:[[3,"routerLink"]],template:function(r,a){r&1&&(n(0,"td",0),l(1),o(),n(2,"td",0),l(3),o(),n(4,"td",0),l(5),o(),n(6,"td",0),l(7),o(),n(8,"td",0),l(9),o(),n(10,"td",0),l(11),o()),r&2&&(c("routerLink",w(12,T,a.flight.id)),m(),v(a.flight.id),m(),c("routerLink",w(14,T,a.flight.id)),m(),v(a.flight.numerLotu),m(),c("routerLink",w(16,T,a.flight.id)),m(),v(a.flight.dataWylotu),m(),c("routerLink",w(18,T,a.flight.id)),m(),v(a.flight.miejsceWylotu),m(),c("routerLink",w(20,T,a.flight.id)),m(),v(a.flight.miejscePrzylotu),m(),c("routerLink",w(22,T,a.flight.id)),m(),v(a.flight.typSamolotu))},dependencies:[U]});let i=e;return i})();var Tt=i=>[i];function Wt(i,e){if(i&1){let s=I();n(0,"tr",3),y("flightToUpdate",function(r){S(s);let a=u();return x(a.editFlight(r))}),o()}if(i&2){let s=e.$implicit;c("flight",s)("index",s.id)("routerLink",w(3,Tt,s.id))}}var Ft=(()=>{let e=class e{constructor(t){this.flightService=t,this.flights=[]}ngOnInit(){this.fetchData(),this.flightService.notifyObservable$.subscribe(t=>{t.refresh&&this.fetchData()})}fetchData(){this.flightService.getFlights().subscribe(t=>this.flights=t)}};e.\u0275fac=function(r){return new(r||e)(d(F))},e.\u0275cmp=g({type:e,selectors:[["app-flight-list"]],inputs:{flights:"flights"},decls:19,vars:1,consts:[[1,"table"],[1,"table","table-striped","table-sm"],["app-flight-item","",3,"flight","index","routerLink","flightToUpdate",4,"ngFor","ngForOf"],["app-flight-item","",3,"flightToUpdate","flight","index","routerLink"]],template:function(r,a){r&1&&(h(0,"hr"),n(1,"div",0)(2,"table",1)(3,"thead")(4,"tr")(5,"th"),l(6,"Id"),o(),n(7,"th"),l(8,"numerLotu"),o(),n(9,"th"),l(10,"dataWylotu"),o(),n(11,"th"),l(12,"miejsceWylotu"),o(),n(13,"th"),l(14,"miejscePrzylotu"),o(),n(15,"th"),l(16,"typSamolotu"),o()()(),n(17,"tbody"),b(18,Wt,1,5,"tr",2),o()()()),r&2&&(m(18),c("ngForOf",a.flights))},dependencies:[U,tt,yt]});let i=e;return i})();var St=(()=>{let e=class e{constructor(t,r,a){this.flightService=t,this.router=r,this.route=a}initNewFlight(){this.router.navigate(["new"],{relativeTo:this.route})}};e.\u0275fac=function(r){return new(r||e)(d(F),d(D),d(M))},e.\u0275cmp=g({type:e,selectors:[["app-flight"]],decls:7,vars:0,consts:[[1,"row"],[1,"col-lg-8"],[1,"btn","btn-success",3,"click"],[1,"col-lg-4"]],template:function(r,a){r&1&&(n(0,"div",0)(1,"div",1)(2,"button",2),y("click",function(){return a.initNewFlight()}),l(3,"Create New Flight"),o(),h(4,"app-flight-list"),o(),n(5,"div",3),h(6,"router-outlet"),o()())},dependencies:[rt,Ft]});let i=e;return i})();var zt=[{path:"",title:"flight",component:St,children:[{path:"",component:vt},{path:"new",component:K},{path:":id",component:gt},{path:":id/edit",component:K}]}],xt=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=$({type:e}),e.\u0275inj=N({imports:[W.forChild(zt),W]});let i=e;return i})();var Fe=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=$({type:e}),e.\u0275inj=N({imports:[W,ut,pt,xt,et]});let i=e;return i})();export{Fe as a};
