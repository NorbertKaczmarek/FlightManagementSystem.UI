import{$ as v,A as D,B as b,C as K,D as V,E as Q,F as X,G as Z,H as tt,M as O,N as w,O as I,P as et,Q as j,R as z,U as L,V as it,W as M,X as rt,Y as nt,Z as R,a as G,b as U,ba as ot,c as W,ca as lt,d as q,da as at,f as H,g as $,h as Y,ha as st,i as u,ia as mt,j as N,k as S,l as x,m as J,n as s,o as d,p as F,q as c,r as o,s as n,t as h,u as E,v as g,w as p,y as l,z as f}from"./chunk-5VBXVKB6.js";var y=(()=>{let e=class e{constructor(t){this.http=t,this.url="flight",this.notify=new G(""),this.notifyObservable$=this.notify.asObservable()}getFlights(){return this.http.get(`${w.apiUrl}/${this.url}`)}getFlightById(t){return this.http.get(`${w.apiUrl}/${this.url}/${t}`)}updateFlight(t){return this.http.post(`${w.apiUrl}/${this.url}/${t.id}`,t)}updateFlightWithId(t,i){return this.http.post(`${w.apiUrl}/${this.url}/${t}`,i).pipe(W(this.handleError))}createFlight(t){return this.http.post(`${w.apiUrl}/${this.url}`,t,{observe:"response"}).pipe(W(this.handleError))}deleteFlight(t){return this.http.delete(`${w.apiUrl}/${this.url}/${t.id}`).pipe(W(this.handleError))}notifyOther(t){t&&this.notify.next(t)}handleError(t){let i="An unknown error occurred!";if(!t.status)return U(()=>new Error(i));switch(t.status){case 401:i="You must be logged in to do it."}return U(()=>new Error(i))}};e.\u0275fac=function(i){return new(i||e)(Y(tt))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function yt(r,e){if(r&1&&(o(0,"div",12)(1,"p"),l(2),n()()),r&2){let m=p(2);s(2),f(m.error)}}function St(r,e){r&1&&(o(0,"p"),l(1,"typSamolotu: Embraer"),n())}function xt(r,e){r&1&&(o(0,"p"),l(1,"typSamolotu: Boeing"),n())}function Ft(r,e){r&1&&(o(0,"p"),l(1,"typSamolotu: Airbus"),n())}function bt(r,e){if(r&1){let m=E();o(0,"div"),h(1,"br"),o(2,"div",1)(3,"div",2),F(4,yt,3,1,"div",3),o(5,"div",4)(6,"button",5),l(7," Manage Flight "),h(8,"span",6),n(),o(9,"ul",7)(10,"li",8)(11,"a",9),g("click",function(){S(m);let i=p();return x(i.onEditFlight())}),l(12,"Edit Flight"),n()(),o(13,"li",8)(14,"a",9),g("click",function(){S(m);let i=p();return x(i.onDeleteFlight())}),l(15,"Delete Flight"),n()()()()()(),h(16,"hr"),o(17,"div",1)(18,"div",2)(19,"h1"),l(20),n()()(),o(21,"div",1)(22,"div",2),l(23),n()(),o(24,"div",1)(25,"div",2),l(26),n()(),o(27,"div",1)(28,"div",2),l(29),n()(),o(30,"div",1)(31,"div",2),l(32),n()(),o(33,"div",1)(34,"div",10),F(35,St,2,0,"p",11)(36,xt,2,0,"p",11)(37,Ft,2,0,"p",11),n()()()}if(r&2){let m=p();s(4),c("ngIf",m.error),s(16),f(m.flight.id),s(3),D("numerLotu: ",m.flight.numerLotu,""),s(3),D("dataWylotu: ",m.flight.dataWylotu,""),s(3),D("miejsceWylotu: ",m.flight.miejsceWylotu,""),s(3),D("miejscePrzylotu: ",m.flight.miejscePrzylotu,""),s(2),c("ngSwitch",m.flight.typSamolotu),s(),c("ngSwitchCase",0),s(),c("ngSwitchCase",1),s(),c("ngSwitchCase",2)}}var dt=(()=>{let e=class e{constructor(t,i,a,_){this.flightService=t,this.route=i,this.router=a,this.titleService=_,this.flight=null,this.error=null}ngOnInit(){this.route.paramMap.pipe(q(t=>(this.id=Number(t.get("id")),this.flightService.getFlightById(this.id)))).subscribe(t=>{this.flight=t,this.titleService.setTitle(`${this.flight.numerLotu}: ${this.flight.miejsceWylotu} -> ${this.flight.miejscePrzylotu}`)})}fetchFlight(){this.flightService.getFlightById(this.id).subscribe(t=>this.flight=t)}onEditFlight(){this.router.navigate(["edit"],{relativeTo:this.route})}onDeleteFlight(){this.flightService.deleteFlight(this.flight).subscribe(()=>{this.flightService.notifyOther({refresh:!0}),this.router.navigate(["/flight"])},t=>{this.error=t.message})}};e.\u0275fac=function(i){return new(i||e)(d(y),d(I),d(j),d(O))},e.\u0275cmp=u({type:e,selectors:[["app-flight-detail"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row"],[1,"col-xs-12"],["class","alert alert-danger",4,"ngIf"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],[1,"dropdown-menu"],[1,"dropdown-item"],[2,"cursor","pointer",3,"click"],[1,"col-xs-12",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"alert","alert-danger"]],template:function(i,a){i&1&&F(0,bt,38,10,"div",0),i&2&&c("ngIf",a.flight)},dependencies:[V,Q,X]});let r=e;return r})();function Ct(r,e){if(r&1&&(o(0,"div",19)(1,"p"),l(2),n()()),r&2){let m=p(2);s(2),f(m.error)}}function _t(r,e){if(r&1){let m=E();o(0,"div")(1,"div",1)(2,"div",2),F(3,Ct,3,1,"div",3),o(4,"form",4),g("ngSubmit",function(){S(m);let i=p();return x(i.onSubmit())}),o(5,"div",1)(6,"div",2)(7,"button",5),l(8," Save "),n(),l(9," | "),o(10,"button",6),g("click",function(){S(m);let i=p();return x(i.onCancel())}),l(11," Cancel "),n(),l(12," | "),o(13,"button",7),g("click",function(){S(m);let i=p();return x(i.onFeedTestData())}),l(14," Feed Test Data "),n()()(),o(15,"div",1)(16,"div",2)(17,"div",8)(18,"label",9),l(19,"numerLotu"),n(),h(20,"input",10),n()()(),o(21,"div",1)(22,"div",2)(23,"div",8)(24,"label",11),l(25,"dataWylotu"),n(),h(26,"input",12),n()()(),o(27,"div",1)(28,"div",2)(29,"div",8)(30,"label",13),l(31,"miejsceWylotu"),n(),h(32,"input",14),n()()(),o(33,"div",1)(34,"div",2)(35,"div",8)(36,"label",15),l(37,"miejscePrzylotu"),n(),h(38,"input",16),n()()(),o(39,"div",1)(40,"div",2)(41,"div",8)(42,"label",17),l(43,"typSamolotu"),n(),h(44,"input",18),n()()()()()()()}if(r&2){let m=p();s(3),c("ngIf",m.error),s(),c("formGroup",m.flightForm),s(3),c("disabled",!m.flightForm.valid)}}var B=(()=>{let e=class e{constructor(t,i,a,_){this.route=t,this.flightService=i,this.router=a,this.titleService=_,this.flight=null,this.editMode=!1,this.error=null}ngOnInit(){this.route.params.subscribe(t=>{this.id=+t.id,this.editMode=t.id!=null,this.initForm(),this.editMode?this.flightService.getFlightById(this.id).subscribe(i=>{this.flight=i,this.titleService.setTitle(`${this.flight.numerLotu}: ${this.flight.miejsceWylotu} -> ${this.flight.miejscePrzylotu}`),this.initForm()}):this.titleService.setTitle("New Flight")})}onSubmit(){this.editMode?this.flightService.updateFlightWithId(this.id,this.flightForm.value).subscribe(()=>{this.flightService.notifyOther({refresh:!0}),this.onCancel()},t=>{this.error=t.message}):this.flightService.createFlight(this.flightForm.value).subscribe(t=>{let i=t.headers.get("location");this.router.navigate([i]),this.flightService.notifyOther({refresh:!0})},t=>{this.error=t.message})}refreshGridInAnotherComponent(){this.flightService.notifyOther({refresh:!0})}onCancel(){this.router.navigate(["../"],{relativeTo:this.route})}initForm(){let t=null,i="",a="",_="",A=null;this.editMode&&(this.fetchFlight(),this.flight&&(t=this.flight.numerLotu,i=this.flight.dataWylotu,a=this.flight.miejsceWylotu,_=this.flight.miejscePrzylotu,A=this.flight.typSamolotu)),this.flightForm=new R({numerLotu:new v(t,M.required),dataWylotu:new v(i,M.required),miejsceWylotu:new v(a,M.required),miejscePrzylotu:new v(_,M.required),typSamolotu:new v(A,M.required)})}fetchFlight(){this.flightService.getFlightById(this.id).subscribe(t=>this.flight=t)}onFeedTestData(){this.flightForm=new R({numerLotu:new v(Math.floor(Math.random()*100)),dataWylotu:new v(new Date(2024,Math.floor(Math.random()*12),Math.floor(Math.random()*30),Math.floor(Math.random()*24),Math.floor(Math.random()*60),Math.floor(Math.random()*60)).toISOString()),miejsceWylotu:new v("Miejsce wylotu "+Math.floor(Math.random()*100)),miejscePrzylotu:new v("Miejsce przylotu "+Math.floor(Math.random()*100)),typSamolotu:new v(Math.floor(Math.random()*3))})}};e.\u0275fac=function(i){return new(i||e)(d(I),d(y),d(j),d(O))},e.\u0275cmp=u({type:e,selectors:[["app-flight-edit"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row"],[1,"col-xs-12"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit","formGroup"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"form-group"],["for","numerLotu"],["type","text","id","numerLotu","formControlName","numerLotu",1,"form-control"],["for","dataWylotu"],["type","text","id","dataWylotu","formControlName","dataWylotu",1,"form-control"],["for","miejsceWylotu"],["type","text","id","miejsceWylotu","formControlName","miejsceWylotu",1,"form-control"],["for","miejscePrzylotu"],["type","text","id","miejscePrzylotu","formControlName","miejscePrzylotu",1,"form-control"],["for","typSamolotu"],["type","text","id","typSamolotu","formControlName","typSamolotu",1,"form-control"],[1,"alert","alert-danger"]],template:function(i,a){i&1&&F(0,_t,45,3,"div",0),i&2&&c("ngIf",a.flightForm)},dependencies:[ot,it,rt,nt,lt,at,V]});let r=e;return r})();var ht=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=u({type:e,selectors:[["app-flight-start"]],decls:0,vars:0,template:function(i,a){}});let r=e;return r})();var wt=["app-flight-item",""],T=r=>[r],pt=(()=>{let e=class e{constructor(t){this.flightService=t,this.flightToUpdate=new J}editFlight(t){this.flightService.getFlightById(this.index).subscribe(i=>this.flightToUpdate.emit(i))}};e.\u0275fac=function(i){return new(i||e)(d(y))},e.\u0275cmp=u({type:e,selectors:[["","app-flight-item",""]],inputs:{flight:"flight",index:"index"},outputs:{flightToUpdate:"flightToUpdate"},attrs:wt,decls:12,vars:24,consts:[[3,"routerLink"]],template:function(i,a){i&1&&(o(0,"td",0),l(1),n(),o(2,"td",0),l(3),n(),o(4,"td",0),l(5),n(),o(6,"td",0),l(7),n(),o(8,"td",0),l(9),n(),o(10,"td",0),l(11),n()),i&2&&(c("routerLink",b(12,T,a.flight.id)),s(),f(a.flight.id),s(),c("routerLink",b(14,T,a.flight.id)),s(),f(a.flight.numerLotu),s(),c("routerLink",b(16,T,a.flight.id)),s(),f(a.flight.dataWylotu),s(),c("routerLink",b(18,T,a.flight.id)),s(),f(a.flight.miejsceWylotu),s(),c("routerLink",b(20,T,a.flight.id)),s(),f(a.flight.miejscePrzylotu),s(),c("routerLink",b(22,T,a.flight.id)),s(),f(a.flight.typSamolotu))},dependencies:[z]});let r=e;return r})();var It=r=>[r];function jt(r,e){if(r&1){let m=E();o(0,"tr",3),g("flightToUpdate",function(i){S(m);let a=p();return x(a.editFlight(i))}),n()}if(r&2){let m=e.$implicit;c("flight",m)("index",m.id)("routerLink",b(3,It,m.id))}}var ut=(()=>{let e=class e{constructor(t){this.flightService=t,this.flights=[]}ngOnInit(){this.fetchData(),this.flightService.notifyObservable$.subscribe(t=>{t.refresh&&this.fetchData()})}fetchData(){this.flightService.getFlights().subscribe(t=>this.flights=t)}};e.\u0275fac=function(i){return new(i||e)(d(y))},e.\u0275cmp=u({type:e,selectors:[["app-flight-list"]],inputs:{flights:"flights"},decls:19,vars:1,consts:[[1,"table"],[1,"table","table-striped","table-sm"],["app-flight-item","",3,"flight","index","routerLink","flightToUpdate",4,"ngFor","ngForOf"],["app-flight-item","",3,"flightToUpdate","flight","index","routerLink"]],template:function(i,a){i&1&&(h(0,"hr"),o(1,"div",0)(2,"table",1)(3,"thead")(4,"tr")(5,"th"),l(6,"Id"),n(),o(7,"th"),l(8,"numerLotu"),n(),o(9,"th"),l(10,"dataWylotu"),n(),o(11,"th"),l(12,"miejsceWylotu"),n(),o(13,"th"),l(14,"miejscePrzylotu"),n(),o(15,"th"),l(16,"typSamolotu"),n()()(),o(17,"tbody"),F(18,jt,1,5,"tr",2),n()()()),i&2&&(s(18),c("ngForOf",a.flights))},dependencies:[z,K,pt]});let r=e;return r})();var ft=(()=>{let e=class e{constructor(t,i,a){this.flightService=t,this.router=i,this.route=a}initNewFlight(){this.router.navigate(["new"],{relativeTo:this.route})}};e.\u0275fac=function(i){return new(i||e)(d(y),d(j),d(I))},e.\u0275cmp=u({type:e,selectors:[["app-flight"]],decls:7,vars:0,consts:[[1,"row"],[1,"col-lg-8"],[1,"btn","btn-success",3,"click"],[1,"col-lg-4"]],template:function(i,a){i&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),g("click",function(){return a.initNewFlight()}),l(3,"Create New Flight"),n(),h(4,"app-flight-list"),n(),o(5,"div",3),h(6,"router-outlet"),n()())},dependencies:[et,ut]});let r=e;return r})();var Tt=[{path:"",title:"flight",component:ft,children:[{path:"",component:ht},{path:"new",component:B},{path:":id",component:dt},{path:":id/edit",component:B}]}],gt=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=N({type:e}),e.\u0275inj=$({imports:[L.forChild(Tt),L]});let r=e;return r})();var pe=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=N({type:e}),e.\u0275inj=$({imports:[L,mt,st,gt,Z]});let r=e;return r})();export{pe as a};
