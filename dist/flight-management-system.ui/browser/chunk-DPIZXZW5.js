import{A as U,B as k,C as B,H as w,J as O,Q as J,U as N,Y as G,Z as _,_ as L,aa as V,ba as T,da as F,f as y,fa as P,ga as j,h,i as I,j as v,k as S,m,ma as q,n as u,na as A,o as x,oa as D,p as d,pa as Y,q as r,r as o,s as c,t as E,u as M,v as p,w as b,x as a,y as g}from"./chunk-MUP74BBE.js";function $(i,e){if(i&1&&(r(0,"div",1)(1,"h4"),a(2,"Your info"),o(),r(3,"div",2)(4,"table",3)(5,"thead",4)(6,"tr")(7,"th",5),a(8,"Id"),o(),r(9,"th",5),a(10,"Name"),o(),r(11,"th",5),a(12,"Email"),o()()(),r(13,"tbody")(14,"tr")(15,"td"),a(16),o(),r(17,"td"),a(18),o(),r(19,"td"),a(20),o()()()()()()),i&2){let s=p();m(16),g(s.user.id),m(2),g(s.user.fullName),m(2),g(s.user.email)}}var K=(()=>{let e=class e{constructor(n,t){this.authService=n,this.titleService=t}ngOnInit(){this.authService.getAccountInfo().subscribe(n=>{this.user=n,this.titleService.setTitle(`User: ${this.user.fullName}`)})}decodeToken(n){let l=n.split(".")[1].replace(/-/g,"+").replace(/_/,"/"),f=decodeURIComponent(atob(l).split("").map(C=>"%"+("00"+C.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(f)}};e.\u0275fac=function(t){return new(t||e)(u(_),u(J))},e.\u0275cmp=h({type:e,selectors:[["app-account"]],decls:2,vars:1,consts:[["class","col-md-4",4,"ngIf"],[1,"col-md-4"],[1,"table-container"],[1,"table","table-bordered","table-striped"],[1,"thead-light"],["scope","col"]],template:function(t,l){t&1&&(c(0,"br"),x(1,$,21,3,"div",0)),t&2&&(m(),d("ngIf",l.user))},dependencies:[w]});let i=e;return i})();function ie(i,e){if(i&1&&(r(0,"div",7)(1,"p"),a(2),o()()),i&2){let s=p();m(2),g(s.error)}}function ne(i,e){}function oe(i,e){i&1&&(r(0,"div",8)(1,"p"),a(2,"Loading..."),o()())}function re(i,e){if(i&1){let s=E();r(0,"form",9,0),M("ngSubmit",function(){v(s);let t=b(1),l=p();return S(l.onSubmit(t))}),r(2,"div",10)(3,"label",11),a(4,"E-Mail"),o(),r(5,"input",12),B("ngModelChange",function(t){v(s);let l=p();return k(l.email,t)||(l.email=t),S(t)}),o()(),r(6,"div",10)(7,"label",13),a(8,"Password"),o(),r(9,"input",14),B("ngModelChange",function(t){v(s);let l=p();return k(l.password,t)||(l.password=t),S(t)}),o()(),c(10,"br"),r(11,"div")(12,"button",15),a(13," Login "),o()()()}if(i&2){let s=b(1),n=p();m(5),U("ngModel",n.email),m(4),U("ngModel",n.password),m(3),d("disabled",!s.valid)}}var Q=(()=>{let e=class e{constructor(n,t){this.authService=n,this.router=t,this.error=null,this.isLoading=!1,this.email=null,this.password=null}onSubmit(n){n.valid&&(this.isLoading=!0,this.authService.login(this.email,this.password).subscribe(t=>{localStorage.setItem("authToken",t),this.router.navigate(["flight"]),this.isLoading=!1,n.reset()},t=>{this.error=t,this.password="",this.isLoading=!1}))}};e.\u0275fac=function(t){return new(t||e)(u(_),u(N))},e.\u0275cmp=h({type:e,selectors:[["app-login"]],decls:6,vars:3,consts:[["authForm","ngForm"],[1,"row"],[1,"col-xs-12","col-md-6","col-md-offset-3"],["class","alert alert-danger",4,"ngIf"],["appPlaceholder",""],["style","text-align: center;",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[1,"alert","alert-danger"],[2,"text-align","center"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","","email","",1,"form-control",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","","minlength","6",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,l){t&1&&(r(0,"div",1)(1,"div",2),x(2,ie,3,1,"div",3)(3,ne,0,0,"ng-template",4)(4,oe,3,0,"div",5)(5,re,14,3,"form",6),o()()),t&2&&(m(2),d("ngIf",l.error),m(2),d("ngIf",l.isLoading),m(),d("ngIf",!l.isLoading))},dependencies:[j,L,V,T,q,D,A,P,F,w]});let i=e;return i})();function ae(i,e){if(i&1&&(r(0,"div",16)(1,"p"),a(2),o()()),i&2){let s=p();m(2),g(s.error)}}function le(i,e){}var X=(()=>{let e=class e{constructor(n,t){this.authService=n,this.router=t,this.error=null}onSubmit(n){if(!n.valid)return;let t=n.value.email,l=n.value.fullName,f=n.value.password,C=n.value.confirmPassword;f==C?this.authService.signup(t,l,f,C).subscribe(()=>{this.router.navigate(["login"]),n.reset()},R=>{this.error=R}):this.error="Passwords are different."}};e.\u0275fac=function(t){return new(t||e)(u(_),u(N))},e.\u0275cmp=h({type:e,selectors:[["app-signup"]],decls:26,vars:2,consts:[["authForm2","ngForm"],[1,"row"],[1,"col-xs-12","col-md-6","col-md-offset-3"],["class","alert alert-danger",4,"ngIf"],["appPlaceholder",""],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","ngModel","","name","email","required","","email","",1,"form-control"],["for","fullName"],["type","text","id","fullName","ngModel","","name","fullName","required","",1,"form-control"],["for","password"],["type","password","id","password","ngModel","","name","password","required","","minlength","6",1,"form-control"],["for","confirmPassword"],["type","password","id","confirmPassword","ngModel","","name","confirmPassword","required","","minlength","6",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-danger"]],template:function(t,l){if(t&1){let f=E();r(0,"div",1)(1,"div",2),x(2,ae,3,1,"div",3)(3,le,0,0,"ng-template",4),r(4,"form",5,0),M("ngSubmit",function(){v(f);let R=b(5);return S(l.onSubmit(R))}),r(6,"div",6)(7,"label",7),a(8,"E-Mail"),o(),c(9,"input",8),o(),r(10,"div",6)(11,"label",9),a(12,"Full Name"),o(),c(13,"input",10),o(),r(14,"div",6)(15,"label",11),a(16,"Password"),o(),c(17,"input",12),o(),r(18,"div",6)(19,"label",13),a(20,"Confirm password"),o(),c(21,"input",14),o(),c(22,"br"),r(23,"div")(24,"button",15),a(25," Signup "),o()()()()()}if(t&2){let f=b(5);m(2),d("ngIf",l.error),m(22),d("disabled",!f.valid)}},dependencies:[j,L,V,T,q,D,A,P,F,w]});let i=e;return i})();var me=[{path:"login",title:"Login",component:Q},{path:"signup",title:"Signup",component:X},{path:"account",title:"Account",component:K}],Z=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=I({type:e}),e.\u0275inj=y({imports:[G.forChild(me),G]});let i=e;return i})();var Me=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=I({type:e}),e.\u0275inj=y({imports:[Y,O,Z]});let i=e;return i})();export{Me as a};
