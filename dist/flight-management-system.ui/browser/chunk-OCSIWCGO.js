import{A as M,B as w,C as L,D as z,E as ot,F as j,G as U,H as nt,I as lt,N as A,O as C,P as D,Q as at,R as T,S as P,V as k,W as st,X as E,Y as mt,Z as dt,_ as K,a as Z,aa as f,b as H,c as O,ca as ct,d as tt,da as ht,ea as pt,f as et,fa as ut,g as V,ga as ft,h as it,ha as gt,i as g,j as B,k as S,l as b,la as vt,m as rt,ma as yt,n as m,o as c,p as F,q as d,r as o,s as n,t as h,u as I,v,w as u,y as l,z as y}from"./chunk-327CQD4X.js";var x=(()=>{let e=class e{constructor(t){this.http=t,this.url="flight",this.notify=new Z(""),this.notifyObservable$=this.notify.asObservable()}getFlights(){return this.http.get(`${C.apiUrl}/${this.url}`)}getFlightById(t){return this.http.get(`${C.apiUrl}/${this.url}/${t}`)}updateFlight(t){return this.http.post(`${C.apiUrl}/${this.url}/${t.id}`,t)}updateFlightWithId(t,r){return this.http.post(`${C.apiUrl}/${this.url}/${t}`,r).pipe(O(this.handleError))}createFlight(t){return this.http.post(`${C.apiUrl}/${this.url}`,t,{observe:"response"}).pipe(O(this.handleError))}deleteFlight(t){return this.http.delete(`${C.apiUrl}/${this.url}/${t.id}`).pipe(O(this.handleError))}notifyOther(t){t&&this.notify.next(t)}handleError(t){let r="An unknown error occurred!";if(!t.status)return H(()=>new Error(r));switch(t.status){case 401:r="You must be logged in to do it."}return t.error&&(t.error.errors?(r="",Object.values(t.error.errors).forEach(p=>{r+=p})):r=t.error),H(()=>new Error(r))}};e.\u0275fac=function(r){return new(r||e)(it(lt))},e.\u0275prov=et({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function Et(i,e){if(i&1&&(o(0,"div",10)(1,"p"),l(2),n()()),i&2){let s=u(2);m(2),y(s.error)}}function It(i,e){if(i&1){let s=I();o(0,"div"),h(1,"br"),o(2,"div",1)(3,"div",2),F(4,Et,3,1,"div",3),o(5,"div",4)(6,"button",5),l(7," Manage Flight "),h(8,"span",6),n(),o(9,"ul",7)(10,"li",8)(11,"a",9),v("click",function(){S(s);let r=u();return b(r.onEditFlight())}),l(12,"Edit Flight"),n()(),o(13,"li",8)(14,"a",9),v("click",function(){S(s);let r=u();return b(r.onDeleteFlight())}),l(15,"Delete Flight"),n()()()()()(),h(16,"hr"),o(17,"div",1)(18,"div",2),l(19),n()(),o(20,"div",1)(21,"div",2),l(22),L(23,"date"),n()(),o(24,"div",1)(25,"div",2),l(26),n()(),o(27,"div",1)(28,"div",2),l(29),n()(),o(30,"div",1)(31,"div",2),l(32),n()()()}if(i&2){let s=u();m(4),d("ngIf",s.error),m(15),M("Numer lotu: ",s.flight.numerLotu,""),m(3),M("Data wylotu: ",z(23,6,s.flight.dataWylotu,"yyyy-MM-dd HH:mm"),""),m(4),M("Miejsce wylotu: ",s.flight.miejsceWylotu,""),m(3),M("Miejsce przylotu: ",s.flight.miejscePrzylotu,""),m(3),M("Typ samolotu: ",s.flight.typSamolotu,"")}}var Ft=(()=>{let e=class e{constructor(t,r,a,p){this.flightService=t,this.route=r,this.router=a,this.titleService=p,this.flight=null,this.error=null}ngOnInit(){this.route.paramMap.pipe(tt(t=>(this.id=Number(t.get("id")),this.flightService.getFlightById(this.id)))).subscribe(t=>{this.flight=t,this.titleService.setTitle(`${this.flight.numerLotu}: ${this.flight.miejsceWylotu} -> ${this.flight.miejscePrzylotu}`)})}fetchFlight(){this.flightService.getFlightById(this.id).subscribe(t=>this.flight=t)}onEditFlight(){this.router.navigate(["edit"],{relativeTo:this.route})}onDeleteFlight(){this.flightService.deleteFlight(this.flight).subscribe(()=>{this.flightService.notifyOther({refresh:!0}),this.router.navigate(["/flight"])},t=>{this.error=t.message})}};e.\u0275fac=function(r){return new(r||e)(c(x),c(D),c(T),c(A))},e.\u0275cmp=g({type:e,selectors:[["app-flight-detail"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row"],[1,"col-xs-12"],["class","alert alert-danger",4,"ngIf"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],[1,"dropdown-menu"],[1,"dropdown-item"],[2,"cursor","pointer",3,"click"],[1,"alert","alert-danger"]],template:function(r,a){r&1&&F(0,It,33,9,"div",0),r&2&&d("ngIf",a.flight)},dependencies:[j,U]});let i=e;return i})();var J=function(i){return i[i.Embraer=0]="Embraer",i[i.Boeing=1]="Boeing",i[i.Airbus=2]="Airbus",i}(J||{}),q=class{constructor(e,s,t,r,a){this.numerLotu=e,this.dataWylotu=s,this.miejsceWylotu=t,this.miejscePrzylotu=r,this.typSamolotu=a}};function Mt(i,e){if(i&1&&(o(0,"div",24)(1,"p"),l(2),n()()),i&2){let s=u(2);m(2),y(s.error)}}function jt(i,e){i&1&&(o(0,"span"),l(1,"Save"),n())}function Dt(i,e){i&1&&(o(0,"span"),l(1,"Create"),n())}function Tt(i,e){if(i&1){let s=I();o(0,"div"),h(1,"br"),o(2,"div",1)(3,"div",2),F(4,Mt,3,1,"div",3),o(5,"form",4),v("ngSubmit",function(){S(s);let r=u();return b(r.onSubmit())}),o(6,"div",1)(7,"div",2)(8,"button",5),F(9,jt,2,0,"span",0)(10,Dt,2,0,"span",0),n(),l(11," | "),o(12,"button",6),v("click",function(){S(s);let r=u();return b(r.onCancel())}),l(13," Cancel "),n(),l(14," | "),o(15,"button",7),v("click",function(){S(s);let r=u();return b(r.onFeedTestData())}),l(16," Feed Test Data "),n()()(),h(17,"hr"),o(18,"div",1)(19,"div",2)(20,"div",8)(21,"label",9),l(22,"Numer lotu"),n(),h(23,"input",10),n()()(),o(24,"div",1)(25,"div",2)(26,"div",8)(27,"label",11),l(28,"Data wylotu"),n(),h(29,"input",12),n(),o(30,"div",8)(31,"label",13),l(32,"Godzina wylotu"),n(),h(33,"input",14),n()()(),o(34,"div",1)(35,"div",2)(36,"div",8)(37,"label",15),l(38,"Miejsce wylotu"),n(),h(39,"input",16),n()()(),o(40,"div",1)(41,"div",2)(42,"div",8)(43,"label",17),l(44,"Miejsce przylotu"),n(),h(45,"input",18),n()()(),o(46,"div",1)(47,"div",2)(48,"div",8)(49,"label",19),l(50,"Typ samolotu"),n(),o(51,"select",20)(52,"option",21),l(53,"Embraer"),n(),o(54,"option",22),l(55,"Boeing"),n(),o(56,"option",23),l(57,"Airbus"),n()()()()()()()()()}if(i&2){let s=u();m(4),d("ngIf",s.error),m(),d("formGroup",s.flightForm),m(3),d("disabled",!s.flightForm.valid),m(),d("ngIf",s.editMode),m(),d("ngIf",!s.editMode)}}var Q=(()=>{let e=class e{constructor(t,r,a,p){this.route=t,this.flightService=r,this.router=a,this.titleService=p,this.flight=null,this.editMode=!1,this.error=null}ngOnInit(){this.route.params.subscribe(t=>{this.id=+t.id,this.editMode=t.id!=null,this.initForm(),this.editMode?this.flightService.getFlightById(this.id).subscribe(r=>{this.flight=r,this.titleService.setTitle(`${this.flight.numerLotu}: ${this.flight.miejsceWylotu} -> ${this.flight.miejscePrzylotu}`),this.initForm()}):this.titleService.setTitle("New Flight")})}onSubmit(){let t=this.flightForm.value.dataWylotu,r=this.flightForm.value.czasWylotu,a=new q(this.flightForm.value.numerLotu,new Date(`${t}T${r}`),this.flightForm.value.miejsceWylotu,this.flightForm.value.miejscePrzylotu,this.flightForm.value.typSamolotu);this.editMode?this.flightService.updateFlightWithId(this.id,a).subscribe(()=>{this.flightService.notifyOther({refresh:!0}),this.onCancel()},p=>{this.error=p.message}):this.flightService.createFlight(a).subscribe(p=>{let $=p.headers.get("location");this.router.navigate([$]),this.flightService.notifyOther({refresh:!0})},p=>{this.error=p.message})}refreshGridInAnotherComponent(){this.flightService.notifyOther({refresh:!0})}onCancel(){this.router.navigate(["../"],{relativeTo:this.route})}getDateFromDate(t){return t.toISOString().slice(0,10)}getTimeFromDate(t){return t.toTimeString().slice(0,5)}initForm(){let t=null,r=this.getDateFromDate(new Date),a=this.getTimeFromDate(new Date),p="",$="",X=null;this.editMode&&(this.fetchFlight(),this.flight&&(t=this.flight.numerLotu,r=this.getDateFromDate(new Date(this.flight.dataWylotu)),a=this.getTimeFromDate(new Date(this.flight.dataWylotu)),p=this.flight.miejsceWylotu,$=this.flight.miejscePrzylotu,X=this.flight.typSamolotu)),this.flightForm=new K({numerLotu:new f(t,E.required),dataWylotu:new f(r,E.required),czasWylotu:new f(a,E.required),miejsceWylotu:new f(p,E.required),miejscePrzylotu:new f($,E.required),typSamolotu:new f(X,E.required)})}fetchFlight(){this.flightService.getFlightById(this.id).subscribe(t=>this.flight=t)}onFeedTestData(){this.flightForm=new K({numerLotu:new f(Math.floor(Math.random()*10*Math.random()*100)),dataWylotu:new f(this.getDateFromDate(new Date(2010+Math.floor(Math.random()*14),Math.floor(Math.random()*12),Math.floor(Math.random()*30)))),czasWylotu:new f(this.getTimeFromDate(new Date(2024,1,1,Math.floor(Math.random()*24),Math.floor(Math.random()*60)))),miejsceWylotu:new f(R[Math.floor(Math.random()*R.length)]),miejscePrzylotu:new f(R[Math.floor(Math.random()*R.length)]),typSamolotu:new f(J[Math.floor(Math.random()*3)])})}};e.\u0275fac=function(r){return new(r||e)(c(D),c(x),c(T),c(A))},e.\u0275cmp=g({type:e,selectors:[["app-flight-edit"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row"],[1,"col-xs-12"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit","formGroup"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"form-group"],["for","numerLotu"],["type","text","id","numerLotu","formControlName","numerLotu",1,"form-control"],["for","dataWylotu"],["type","date","id","dataWylotu","formControlName","dataWylotu",1,"form-control"],["for","czasWylotu"],["type","time","id","czasWylotu","formControlName","czasWylotu",1,"form-control"],["for","miejsceWylotu"],["type","text","id","miejsceWylotu","formControlName","miejsceWylotu",1,"form-control"],["for","miejscePrzylotu"],["type","text","id","miejscePrzylotu","formControlName","miejscePrzylotu",1,"form-control"],["for","typSamolotu"],["id","typSamolotu","formControlName","typSamolotu",1,"form-select"],["selected","","value","Embraer"],["value","Boeing"],["value","Airbus"],[1,"alert","alert-danger"]],template:function(r,a){r&1&&F(0,Tt,58,5,"div",0),r&2&&d("ngIf",a.flightForm)},dependencies:[ct,ft,gt,st,ut,mt,dt,ht,pt,j]});let i=e;return i})(),R=["Warszawa","Krak\xF3w","Gda\u0144sk","Wroc\u0142aw","Pozna\u0144","Szczecin","\u0141\xF3d\u017A","Katowice","Gdynia","Cz\u0119stochowa"];var xt=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=g({type:e,selectors:[["app-flight-start"]],decls:0,vars:0,template:function(r,a){}});let i=e;return i})();var Wt=["app-flight-item",""],W=i=>[i],St=(()=>{let e=class e{constructor(t){this.flightService=t,this.flightToUpdate=new rt}editFlight(t){this.flightService.getFlightById(this.index).subscribe(r=>this.flightToUpdate.emit(r))}};e.\u0275fac=function(r){return new(r||e)(c(x))},e.\u0275cmp=g({type:e,selectors:[["","app-flight-item",""]],inputs:{flight:"flight",index:"index"},outputs:{flightToUpdate:"flightToUpdate"},attrs:Wt,decls:14,vars:30,consts:[[3,"routerLink"]],template:function(r,a){r&1&&(o(0,"td",0),l(1),n(),o(2,"td",0),l(3),L(4,"date"),n(),o(5,"td",0),l(6),L(7,"date"),n(),o(8,"td",0),l(9),n(),o(10,"td",0),l(11),n(),o(12,"td",0),l(13),n()),r&2&&(d("routerLink",w(18,W,a.flight.id)),m(),y(a.flight.numerLotu),m(),d("routerLink",w(20,W,a.flight.id)),m(),y(z(4,12,a.flight.dataWylotu,"yyyy-MM-dd")),m(2),d("routerLink",w(22,W,a.flight.id)),m(),y(z(7,15,a.flight.dataWylotu,"HH:mm")),m(2),d("routerLink",w(24,W,a.flight.id)),m(),y(a.flight.miejsceWylotu),m(),d("routerLink",w(26,W,a.flight.id)),m(),y(a.flight.miejscePrzylotu),m(),d("routerLink",w(28,W,a.flight.id)),m(),y(a.flight.typSamolotu))},dependencies:[P,U]});let i=e;return i})();var zt=i=>[i];function kt(i,e){i&1&&(o(0,"div",2)(1,"p"),l(2,"Loading..."),n()())}function Nt(i,e){if(i&1){let s=I();o(0,"tr",6),v("flightToUpdate",function(r){S(s);let a=u(2);return b(a.editFlight(r))}),n()}if(i&2){let s=e.$implicit;d("flight",s)("index",s.id)("routerLink",w(3,zt,s.id))}}function $t(i,e){if(i&1&&(o(0,"div",3)(1,"table",4)(2,"thead")(3,"tr")(4,"th"),l(5,"Numer lotu"),n(),o(6,"th"),l(7,"Data wylotu"),n(),o(8,"th"),l(9,"Czas wylotu"),n(),o(10,"th"),l(11,"Miejsce wylotu"),n(),o(12,"th"),l(13,"Miejsce przylotu"),n(),o(14,"th"),l(15,"Typ samolotu"),n()()(),o(16,"tbody"),F(17,Nt,1,5,"tr",5),n()()()),i&2){let s=u();m(17),d("ngForOf",s.flights)}}var bt=(()=>{let e=class e{constructor(t){this.flightService=t,this.flights=[],this.isLoading=!1}ngOnInit(){this.isLoading=!0,this.fetchData(),this.flightService.notifyObservable$.subscribe(t=>{t.refresh&&this.fetchData()})}fetchData(){this.flightService.getFlights().subscribe(t=>{this.flights=t,this.isLoading=!1})}};e.\u0275fac=function(r){return new(r||e)(c(x))},e.\u0275cmp=g({type:e,selectors:[["app-flight-list"]],inputs:{flights:"flights"},decls:3,vars:2,consts:[["style","text-align: center;",4,"ngIf"],["class","table",4,"ngIf"],[2,"text-align","center"],[1,"table"],[1,"table","table-striped","table-sm"],["app-flight-item","",3,"flight","index","routerLink","flightToUpdate",4,"ngFor","ngForOf"],["app-flight-item","",3,"flightToUpdate","flight","index","routerLink"]],template:function(r,a){r&1&&(h(0,"hr"),F(1,kt,3,0,"div",0)(2,$t,18,1,"div",1)),r&2&&(m(),d("ngIf",a.isLoading),m(),d("ngIf",!a.isLoading))},dependencies:[P,ot,j,St]});let i=e;return i})();var wt=(()=>{let e=class e{constructor(t,r,a){this.flightService=t,this.router=r,this.route=a}initNewFlight(){this.router.navigate(["new"],{relativeTo:this.route})}};e.\u0275fac=function(r){return new(r||e)(c(x),c(T),c(D))},e.\u0275cmp=g({type:e,selectors:[["app-flight"]],decls:8,vars:0,consts:[[1,"row"],[1,"col-lg-8"],[1,"btn","btn-success",3,"click"],[1,"col-lg-4"]],template:function(r,a){r&1&&(o(0,"div",0)(1,"div",1),h(2,"br"),o(3,"button",2),v("click",function(){return a.initNewFlight()}),l(4,"Create New Flight"),n(),h(5,"app-flight-list"),n(),o(6,"div",3),h(7,"router-outlet"),n()())},dependencies:[at,bt]});let i=e;return i})();var Vt=[{path:"",title:"flight",component:wt,children:[{path:"",component:xt},{path:"new",component:Q},{path:":id",component:Ft},{path:":id/edit",component:Q}]}],_t=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=B({type:e}),e.\u0275inj=V({imports:[k.forChild(Vt),k]});let i=e;return i})();var _e=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=B({type:e}),e.\u0275inj=V({imports:[k,yt,vt,_t,nt]});let i=e;return i})();export{_e as a};
